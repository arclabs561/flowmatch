[package]
name = "flowmatch"
version = "0.1.0"
edition = "2021"
license = "MIT OR Apache-2.0"
publish = true

[features]
# Default build stays `ndarray`-only; `burn` is an opt-in training backend path.
default = []
burn = [
    "dep:burn-core",
    "dep:burn-autodiff",
    "dep:burn-ndarray",
    "dep:burn-nn",
    "dep:burn-optim",
]

[dependencies]
thiserror = "2.0"
ndarray = "0.16"
rand = "0.9"
rand_chacha = "0.9"
rand_distr = "0.5"
logp = { path = "../logp", version = "0.1.0" }
wass = { path = "../wass", version = "0.1.1" }
skel = { path = "../skel", version = "0.1.0" }
burn-core = { version = "0.20.0", default-features = false, features = ["std"], optional = true }
burn-autodiff = { version = "0.20.0", default-features = false, features = ["std"], optional = true }
burn-ndarray = { version = "0.20.0", default-features = true, optional = true }
burn-nn = { version = "0.20.0", default-features = false, features = ["std"], optional = true }
burn-optim = { version = "0.20.0", default-features = false, features = ["std"], optional = true }

[dev-dependencies]
proptest = "1.5"
criterion = { version = "0.5", features = ["html_reports"] }
petgraph = "0.6"
hyp = { path = "../hyp", version = "0.1.0" }
# Used only by examples/tests to score “structure”, not for core flowmatch APIs.
# Note: `tier` currently requires `community` for `petgraph` types used internally.
# We also enable `wass` so we can reuse `tier::distribution_distance::DistributionDistance`
# (sliced Wasserstein two-sample distance) for stronger evals.
tier = { path = "../tier", version = "0.1.0", default-features = false, features = ["cluster", "community", "wass", "knn-graph"] }

[[bench]]
name = "realdata_usgs"
harness = false

[[bench]]
name = "realdata_torsions"
harness = false

[[bench]]
name = "pairing"
harness = false

